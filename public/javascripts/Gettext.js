Gettext=function(t){this.domain="messages",this.locale_data=void 0;var e=["domain","locale_data"];if(this.isValidObject(t))for(var a in t)for(var r=0;r<e.length;r++)a==e[r]&&this.isValidObject(t[a])&&(this[a]=t[a]);return this.try_load_lang(),this},Gettext.context_glue="",Gettext._locale_data={},Gettext.prototype.try_load_lang=function(){if(void 0!==this.locale_data){var t=this.locale_data;if(this.locale_data=void 0,this.parse_locale_data(t),void 0===Gettext._locale_data[this.domain])throw new Error("Error: Gettext 'locale_data' does not contain the domain '"+this.domain+"'")}var e=this.get_lang_refs();if("object"==typeof e&&0<e.length)for(var a=0;a<e.length;a++){var r=e[a];if("application/json"==r.type){if(!this.try_load_lang_json(r.href))throw new Error("Error: Gettext 'try_load_lang_json' failed. Unable to exec xmlhttprequest for link ["+r.href+"]")}else{if("application/x-po"!=r.type)throw new Error("TODO: link type ["+r.type+"] found, and support is planned, but not implemented at this time.");if(!this.try_load_lang_po(r.href))throw new Error("Error: Gettext 'try_load_lang_po' failed. Unable to exec xmlhttprequest for link ["+r.href+"]")}}},Gettext.prototype.parse_locale_data=function(t){for(var e in void 0===Gettext._locale_data&&(Gettext._locale_data={}),t)if(t.hasOwnProperty(e)&&this.isValidObject(t[e])){var a,r=!1;for(a in t[e]){r=!0;break}if(r){var o,i=t[e];for(o in""==e&&(e="messages"),this.isValidObject(Gettext._locale_data[e])||(Gettext._locale_data[e]={}),this.isValidObject(Gettext._locale_data[e].head)||(Gettext._locale_data[e].head={}),this.isValidObject(Gettext._locale_data[e].msgs)||(Gettext._locale_data[e].msgs={}),i)if(""==o){var n,s=i[o];for(n in s){var l=n.toLowerCase();Gettext._locale_data[e].head[l]=s[n]}}else Gettext._locale_data[e].msgs[o]=i[o]}}for(var e in Gettext._locale_data)if(this.isValidObject(Gettext._locale_data[e].head["plural-forms"])&&void 0===Gettext._locale_data[e].head.plural_func){var p=Gettext._locale_data[e].head["plural-forms"];if(!new RegExp("^(\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;a-zA-Z0-9_()])+)","m").test(p))throw new Error("Syntax error in language file. Plural-Forms header is invalid ["+p+"]");p=Gettext._locale_data[e].head["plural-forms"],p="var plural; var nplurals; "+(p=/;\s*$/.test(p)?p:p.concat(";"))+' return { "nplural" : nplurals, "plural" : (plural === true ? 1 : plural ? plural : 0) };';Gettext._locale_data[e].head.plural_func=new Function("n",p)}else void 0===Gettext._locale_data[e].head.plural_func&&(Gettext._locale_data[e].head.plural_func=function(t){return{nplural:2,plural:1!=t?1:0}})},Gettext.prototype.try_load_lang_po=function(t){var e,a=this.sjax(t);if(a)return t=this.uri_basename(t),a=this.parse_po(a),e={},a&&(a[""]||(a[""]={}),a[""].domain||(a[""].domain=t),e[t=a[""].domain]=a,this.parse_locale_data(e)),1},Gettext.prototype.uri_basename=function(t){var e;return(t=t.match(/^(.*\/)?(.*)/))?(e=t[2].match(/^(.*)\..+$/))?e[1]:t[2]:""},Gettext.prototype.parse_po=function(t){for(var e={},a={},r="",o=[],i=t.split("\n"),n=0;n<i.length;n++)if(i[n]=i[n].replace(/(\n|\r)+$/,""),/^$/.test(i[n])){if(void 0!==a.msgid){var s=void 0!==a.msgctxt&&a.msgctxt.length?a.msgctxt+Gettext.context_glue+a.msgid:a.msgid,l=void 0!==a.msgid_plural&&a.msgid_plural.length?a.msgid_plural:null,p=[];for(d in a)(u=d.match(/^msgstr_(\d+)/))&&(p[parseInt(u[1])]=a[d]);p.unshift(l),1<p.length&&(e[s]=p),a={},r=""}}else/^#/.test(i[n])||((u=i[n].match(/^msgctxt\s+(.*)/))?a[r="msgctxt"]=this.parse_po_dequote(u[1]):(u=i[n].match(/^msgid\s+(.*)/))?a[r="msgid"]=this.parse_po_dequote(u[1]):(u=i[n].match(/^msgid_plural\s+(.*)/))?a[r="msgid_plural"]=this.parse_po_dequote(u[1]):(u=i[n].match(/^msgstr\s+(.*)/))||(u=i[n].match(/^msgstr\[0\]\s+(.*)/))?a[r="msgstr_0"]=this.parse_po_dequote(u[1]):(u=i[n].match(/^msgstr\[(\d+)\]\s+(.*)/))?a[r="msgstr_"+u[1]]=this.parse_po_dequote(u[2]):/^"/.test(i[n])?a[r]+=this.parse_po_dequote(i[n]):o.push("Strange line ["+n+"] : "+i[n]));if(void 0!==a.msgid){var d,u,s=void 0!==a.msgctxt&&a.msgctxt.length?a.msgctxt+Gettext.context_glue+a.msgid:a.msgid,l=void 0!==a.msgid_plural&&a.msgid_plural.length?a.msgid_plural:null,p=[];for(d in a)(u=d.match(/^msgstr_(\d+)/))&&(p[parseInt(u[1])]=a[d]);p.unshift(l),1<p.length&&(e[s]=p),a={},r=""}if(e[""]&&e[""][1]){for(var c,h,_={},x=e[""][1].split(/\\n/),n=0;n<x.length;n++)x.length&&(-1!=(c=x[n].indexOf(":",0))?(h=x[n].substring(0,c),c=x[n].substring(c+1),_[h=h.toLowerCase()]&&_[h].length?o.push("SKIPPING DUPLICATE HEADER LINE: "+x[n]):/#-#-#-#-#/.test(h)?o.push("SKIPPING ERROR MARKER IN HEADER: "+x[n]):(c=c.replace(/^\s+/,""),_[h]=c)):(o.push("PROBLEM LINE IN HEADER: "+x[n]),_[x[n]]=""));e[""]=_}else e[""]={};return e},Gettext.prototype.parse_po_dequote=function(t){var e;return t=(t=(e=t.match(/^"(.*)"/))?e[1]:t).replace(/\\"/g,'"')},Gettext.prototype.try_load_lang_json=function(t){var t=this.sjax(t);if(t)return t=this.JSON(t),this.parse_locale_data(t),1},Gettext.prototype.get_lang_refs=function(){for(var t=new Array,e=document.getElementsByTagName("link"),a=0;a<e.length;a++)if("gettext"==e[a].rel&&e[a].href){if(void 0===e[a].type||""==e[a].type)if(/\.json$/i.test(e[a].href))e[a].type="application/json";else if(/\.js$/i.test(e[a].href))e[a].type="application/json";else if(/\.po$/i.test(e[a].href))e[a].type="application/x-po";else{if(!/\.mo$/i.test(e[a].href))throw new Error("LINK tag with rel=gettext found, but the type and extension are unrecognized.");e[a].type="application/x-mo"}if(e[a].type=e[a].type.toLowerCase(),"application/json"==e[a].type)e[a].type="application/json";else if("text/javascript"==e[a].type)e[a].type="application/json";else if("application/x-po"==e[a].type)e[a].type="application/x-po";else{if("application/x-mo"!=e[a].type)throw new Error("LINK tag with rel=gettext found, but the type attribute ["+e[a].type+"] is unrecognized.");e[a].type="application/x-mo"}t.push(e[a])}return t},Gettext.prototype.textdomain=function(t){return t&&t.length&&(this.domain=t),this.domain},Gettext.prototype.gettext=function(t){return this.dcnpgettext(null,void 0,t,void 0,void 0,void 0)},Gettext.prototype.dgettext=function(t,e){return this.dcnpgettext(t,void 0,e,void 0,void 0,void 0)},Gettext.prototype.dcgettext=function(t,e,a){return this.dcnpgettext(t,void 0,e,void 0,void 0,a)},Gettext.prototype.ngettext=function(t,e,a){return this.dcnpgettext(null,void 0,t,e,a,void 0)},Gettext.prototype.dngettext=function(t,e,a,r){return this.dcnpgettext(t,void 0,e,a,r,void 0)},Gettext.prototype.dcngettext=function(t,e,a,r,o){return this.dcnpgettext(t,void 0,e,a,r,o,o)},Gettext.prototype.pgettext=function(t,e){return this.dcnpgettext(null,t,e,void 0,void 0,void 0)},Gettext.prototype.dpgettext=function(t,e,a){return this.dcnpgettext(t,e,a,void 0,void 0,void 0)},Gettext.prototype.dcpgettext=function(t,e,a,r){return this.dcnpgettext(t,e,a,void 0,void 0,r)},Gettext.prototype.npgettext=function(t,e,a,r){return this.dcnpgettext(null,t,e,a,r,void 0)},Gettext.prototype.dnpgettext=function(t,e,a,r,o){return this.dcnpgettext(t,e,a,r,o,void 0)},Gettext.prototype.dcnpgettext=function(t,e,a,r,o,i){if(!this.isValidObject(a))return"";var n=this.isValidObject(r),s=this.isValidObject(e)?e+Gettext.context_glue+a:a,e=this.isValidObject(t)?t:this.isValidObject(this.domain)?this.domain:"messages",l=new Array;if(void 0!==Gettext._locale_data&&this.isValidObject(Gettext._locale_data[e]))l.push(Gettext._locale_data[e]);else if(void 0!==Gettext._locale_data)for(var p in Gettext._locale_data)l.push(Gettext._locale_data[p]);var d,u=[],c=!1;if(l.length)for(var h=0;h<l.length;h++){var _=l[h];if(this.isValidObject(_.msgs[s])){for(var x=0;x<_.msgs[s].length;x++)u[x]=_.msgs[s][x];if(u.shift(),d=_,c=!0,0<u.length&&0!=u[0].length)break}}t=(u=0!=u.length&&0!=u[0].length?u:[a,r])[0];return n&&(a=c&&this.isValidObject(d.head.plural_func)?((e=d.head.plural_func(o)).plural||(e.plural=0),e.nplural||(e.nplural=0),e.nplural<=e.plural&&(e.plural=0),e.plural):1!=o?1:0,this.isValidObject(u[a])&&(t=u[a])),t},Gettext.strargs=function(t,e){null==e||void 0===e?e=[]:e.constructor!=Array&&(e=[e]);for(var a="";;){var r,o,i=t.indexOf("%");if(-1==i){a+=t;break}a+=t.substr(0,i),t="%%"==t.substr(i,2)?(a+="%",t.substr(i+2)):(o=t.substr(i).match(/^%(\d+)/))?(r=parseInt(o[1]),o=o[1].length,0<r&&null!=e[r-1]&&void 0!==e[r-1]&&(a+=e[r-1]),t.substr(i+1+o)):(a+="%",t.substr(i+1))}return a},Gettext.prototype.strargs=function(t,e){return Gettext.strargs(t,e)},Gettext.prototype.isArray=function(t){return this.isValidObject(t)&&t.constructor==Array},Gettext.prototype.isValidObject=function(t){return null!=t&&void 0!==t},Gettext.prototype.sjax=function(t){var e=window.XMLHttpRequest?new XMLHttpRequest:-1!=navigator.userAgent.toLowerCase().indexOf("msie 5")?new ActiveXObject("Microsoft.XMLHTTP"):new ActiveXObject("Msxml2.XMLHTTP");if(!e)throw new Error("Your browser doesn't do Ajax. Unable to support external language files.");e.open("GET",t,!1);try{e.send(null)}catch(t){return}t=e.status;if(200==t||0==t)return e.responseText;t=e.statusText+" (Error "+e.status+")";e.responseText.length&&(t+="\n"+e.responseText),alert(t)},Gettext.prototype.JSON=function(data){return eval("("+data+")")};